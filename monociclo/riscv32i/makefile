# ============================================================
# RISC-V MONOCICLO - Makefile
# ------------------------------------------------------------
# Comandos:
#   make          -> compila y simula
#   make view     -> abre GTKWave
#   make clean    -> borra temporales
# ============================================================

# Archivos fuente
SRC = \
  riscv_tb.sv \
  riscv.sv \
  pc.sv \
  instruction_memory.sv \
  control_unit.sv \
  imm_gen.sv \
  reg_unit.sv \
  alu.sv \
  data_memory.sv \
  branch_unit.sv

# Archivos de salida
OUT = riscv_tb.vvp
VCD = riscv.vcd

# Simulador
IVERILOG = iverilog -g2012
VVP = vvp
GTK = gtkwave

# ============================================================
# Targets principales
# ============================================================

# Compila y simula
all: $(OUT)
	@echo "üöÄ Ejecutando simulaci√≥n..."
	$(VVP) $(OUT)

# Compilaci√≥n
$(OUT): $(SRC)
	@echo "üõ†Ô∏è  Compilando proyecto..."
	$(IVERILOG) -o $(OUT) $(SRC)

# Abrir GTKWave
view:
	@echo "üëÄ Abriendo GTKWave..."
	$(GTK) $(VCD) &

# Limpiar archivos generados
clean:
	@echo "üßπ Limpiando archivos temporales..."
	rm -f $(OUT) $(VCD)

.PHONY: all view clean
